define(["jquery","app/util"],(t,i)=>{"use strict";let s="pf-landing-top",e="pf-header-canvas";class Color{constructor(t,i,s,e=1){this._r=t,this._g=i,this._b=s,this._a=e}get r(){return this._r}get g(){return this._g}get b(){return this._b}style(t=this.a){return`rgba(${this.r}, ${this.g}, ${this.b}, ${t})`}}class Node{constructor(t,i,s,e={}){this._anchorX=t,this._anchorY=i,this._ctx=s,this._config=e,this._x=Math.random()*(t-(t-this._config.anchorLength))+(t-this._config.anchorLength),this._y=Math.random()*(i-(i-this._config.anchorLength))+(i-this._config.anchorLength),this._vx=2*Math.random()-1,this._vy=2*Math.random()-1,this._energy=100*Math.random(),this._radius=Math.random(),this._siblings=[],this._brightness=0,this._isPointer=!1}set x(t){this._x=t}get x(){return this._x}set y(t){this._y=t}get y(){return this._y}set siblings(t){this._siblings=t}get siblings(){return this._siblings}get radius(){return this.isPointer?3:2*this._radius+2*this._siblings.length/this._config.siblingsLimit}set brightness(t){this._brightness=t}get brightness(){return this.isPointer?1:this._brightness}set color(t){this._color=t}get color(){return this._color}set isPointer(t){this._isPointer=t}get isPointer(){return this._isPointer}drawNode(){this._ctx.beginPath(),this._ctx.arc(this.x,this.y,this.radius,0,StarCanvas.circ),this._ctx.fillStyle=this.color.style(this.brightness*this._config.brightnessMultiplierNode),this._ctx.fill()}drawConnections(){for(let t=0;t<this._siblings.length;t++)this._ctx.beginPath(),this._ctx.moveTo(this.x,this.y),this._ctx.lineTo(this._siblings[t].x,this._siblings[t].y),this._ctx.lineWidth=1-StarCanvas.calcDistance(this,this._siblings[t])/this._config.sensitivity,this.color===this._siblings[t].color?this._ctx.strokeStyle=this.color.style(this.brightness*this._config.brightnessMultiplierConnection):this._ctx.strokeStyle=this.gradient(this._siblings[t],StarCanvas.lineStyle(this,this._siblings[t])),this._ctx.stroke()}gradient(t,i){let s=this._ctx.createLinearGradient(Math.floor(this.x),Math.floor(this.y),Math.floor(t.x),Math.floor(t.y));return s.addColorStop(0,this.color.style(this.brightness*this._config.brightnessMultiplierConnection)),s.addColorStop(.5,i),s.addColorStop(1,t.color.style(t.brightness*this._config.brightnessMultiplierConnection)),s}moveNode(){this._energy-=2,this._energy<1&&(this._energy=100*Math.random(),this.x-this._anchorX<-this._config.anchorLength?this._vx=2*Math.random():this.x-this._anchorX>this._config.anchorLength?this._vx=-2*Math.random():this._vx=4*Math.random()-2,this.y-this._anchorY<-this._config.anchorLength?this._vy=2*Math.random():this.y-this._anchorY>this._config.anchorLength?this._vy=-2*Math.random():this._vy=4*Math.random()-2),this.x+=this._vx*this._energy/100,this.y+=this._vy*this._energy/100}}class StarCanvas{constructor(t,i={}){this._canvas=t,this._config=Object.assign({},new.target.defaultConfig,i),this._nodes=[],this._nodesQty=0,this._updateActive=!0,this._minWait=Math.floor(1/this._config.fps*1e3),this.resizeWindow(),this._mouse=this._config.startCoordinates(this._canvas),this._ctx=this._canvas.getContext("2d",{alpha:!0,desynchronized:!1,preserveDrawingBuffer:!0}),this.initHandlers(),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerOver=this.onPointerOver.bind(this),this.onPointerEnter=this.onPointerEnter.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.onPointerLeave=this.onPointerLeave.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.initPointerLock(),this.initIntersectionObserver(),this.setColorBase(),this.initNodes(),this.redrawCheck()}setColorBase(){this._colorBase=Array.isArray(this._config.colorBase)?new Color(...this._config.colorBase):null}isPaused(){return"function"==typeof this._config.isPaused?this._config.isPaused(this):this._config.isPaused}eventContainer(){return this._config.container?this._config.container:this._canvas}findSiblings(){let t,i,s;for(let e=0;e<this._nodesQty;e++){(t=this._nodes[e]).siblings=[];for(let e=0;e<this._nodesQty;e++)if(t!==(i=this._nodes[e])&&(s=StarCanvas.calcDistance(t,i))<this._config.sensitivity)if(t.siblings.length<this._config.siblingsLimit)t.siblings.push(i);else{let e,n=0,o=0;for(let i=0;i<this._config.siblingsLimit;i++)(n=StarCanvas.calcDistance(t,t.siblings[i]))>o&&(o=n,e=i);s<o&&(t.siblings.splice(e,1),t.siblings.push(i))}}}redrawScene(){this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this.findSiblings();let t=this._config.mouseRadius+this._config.anchorLength;this._pointerNode.x=this._mouse.x,this._pointerNode.y=this._mouse.y;let i,s,e,n=[0];for(i=0;i<this._nodesQty;i++)s=this._nodes[i],(e=StarCanvas.calcDistance({x:this._mouse.x,y:this._mouse.y},s))<this._config.mouseRadius?s.brightness=1-e/this._config.mouseRadius:s.brightness=0,e>t&&n.push(i),n=[];for(i=0;i<this._nodesQty;i++)(s=this._nodes[i]).brightness&&(s.drawNode(),s.drawConnections()),n.includes(i)||s.moveNode()}redrawCheck(){this._animationFrameId&&cancelAnimationFrame(this._animationFrameId),this._animationFrameId=requestAnimationFrame(()=>{let t=Date.now();this._updateActive&&!this.isPaused()&&t-(this._lastRender||0)>=this._minWait&&(this._lastRender=t,this.redrawScene()),this._animationFrameId=null,this.redrawCheck()})}initNodes(){this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._nodes=[];for(let t=this._config.density;t<this._canvas.width;t+=this._config.density)for(let i=this._config.density;i<this._canvas.height;i+=this._config.density){let s=new Node(t,i,this._ctx,this._config);"function"==typeof this._config.colorBase?s.color=this._config.colorBase(s,this):s.color=this._colorBase,this._nodes.push(s),this._nodesQty++}this._pointerNode=new Node(this._mouse.x,this._mouse.y,this._ctx,this._config),this._pointerNode.color=new Color(...this._config.colorCursor),this._pointerNode.brightness=1,this._pointerNode.isPointer=!0,this._nodes.unshift(this._pointerNode),this._nodesQty++}initHandlers(){this.eventContainer().addEventListener("pointerover",t=>this.onPointerOver(t),{passive:!0}),this.eventContainer().addEventListener("pointerenter",t=>this.onPointerEnter(t),{passive:!0}),this.eventContainer().addEventListener("pointermove",t=>this.onPointerMove(t),{passive:!0}),this.eventContainer().addEventListener("pointerout",t=>this.onPointerOut(t),{passive:!0}),this.eventContainer().addEventListener("pointerleave",t=>this.onPointerLeave(t),{passive:!0})}initPointerLock(){if(!this._config.pointerLock)return;this._canvas.addEventListener("pointerdown",this.onPointerDown,!1),document.addEventListener("pointerlockchange",t=>{document.pointerLockElement===this._canvas?this.eventContainer().classList.add(this._config.pointerLockedClass):this.eventContainer().classList.remove(this._config.pointerLockedClass)},!1)}initIntersectionObserver(){this._intersectionObserver=new IntersectionObserver(t=>{let i=Math.floor(100*t[0].intersectionRatio);this._updateActive=i>0},{threshold:[0,.2,.4,.6,.8,1]}),this._intersectionObserver.observe(this._canvas)}mousemoveHandler(t){this._mouse.x=t.clientX,this._mouse.y=t.clientY}onPointerMove(t){t.preventDefault();let i=this._mouse.x+Math.floor(t.movementX),s=this._mouse.y+Math.floor(t.movementY);this._mouse.x=Math.min(this._canvas.width,Math.max(0,i)),this._mouse.y=Math.min(this._canvas.height,Math.max(0,s))}onPointerDown(t){this._mouse.x=t.clientX,this._mouse.y=t.clientY,document.pointerLockElement===this._canvas?document.exitPointerLock():this._canvas.requestPointerLock()}onPointerOver(t){t.preventDefault(),this._mouse.x=t.clientX,this._mouse.y=t.clientY}onPointerEnter(t){}onPointerOut(t){}onPointerLeave(t){t.preventDefault(),document.exitPointerLock()}resizeWindow(){let t=this._config.newDimension(this);this._canvas.width=t.width,this._canvas.height=t.height}}StarCanvas.circ=2*Math.PI,StarCanvas.calcDistance=((t,i)=>Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))),StarCanvas.lineStyle=((t,i)=>{let s=StarCanvas.mixComponents(t.color.r,i.color.r,t.radius,i.radius),e=StarCanvas.mixComponents(t.color.g,i.color.g,t.radius,i.radius),n=StarCanvas.mixComponents(t.color.b,i.color.b,t.radius,i.radius),o=(t.brightness+i.brightness)/2;return`rgba(${Math.floor(s)}, ${Math.floor(e)}, ${Math.floor(n)}, ${o})`}),StarCanvas.mixComponents=((t,i,s,e)=>(t*s+i*e)/(s+e)),StarCanvas.getRandomIntInclusive=((t,i)=>(t=Math.ceil(t),i=Math.floor(i),Math.floor(Math.random()*(i-t+1))+t)),StarCanvas.defaultConfig={pointerLockedClass:"pointer-locked",fps:80,sensitivity:90,siblingsLimit:15,density:50,anchorLength:80,mouseRadius:150,brightnessMultiplierNode:1,brightnessMultiplierConnection:1,colorBase:[108,174,173],colorCursor:[226,138,13],newDimension:()=>({width:window.innerWidth,height:window.innerHeight}),startCoordinates:t=>({x:t.width/2,y:t.height/2}),isPaused:!1,container:!1,pointerLock:!0};let n={brightnessMultiplierConnection:.95,colorCursor:[200,184,71],newDimension:t=>({width:window.innerWidth,height:354}),startCoordinates:t=>({x:t.width/2+500,y:t.height/2+50}),isPaused:()=>document.body.classList.contains("on-scroll"),container:document.getElementById(s)};navigator.userAgent.indexOf("Chrome")>-1?Object.assign(n,{sensitivity:85,siblingsLimit:10,density:60,anchorLength:20,colorBase:(t,i)=>{let s=StarCanvas.getRandomIntInclusive(0,4),e=`_randColor${s}`;if(i[e])return i[e];let n=StarCanvas.defaultConfig.colorBase;switch(s){case 1:n=[92,184,92];break;case 2:n=[68,170,130];break;case 3:n=[194,118,12];break;case 4:n=StarCanvas.defaultConfig.colorBase}return i[e]=new Color(...n),i[e]}}):Object.assign(n,{sensitivity:85,siblingsLimit:6,density:60,anchorLength:20,mouseRadius:120});return{init:()=>{let t=document.getElementById(e);if(t){let s=new StarCanvas(t,n);t.classList.add("in"),i.getResizeManager().observe(t.parentNode,(i,e)=>{t.width!==e.width&&s.resizeWindow()},{debounce:!0,ms:260})}}}});
//# sourceMappingURL=header_login.js.map
