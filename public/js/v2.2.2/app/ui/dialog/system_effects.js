define(["jquery","app/init","app/util","bootbox","app/map/util"],(e,t,a,s,l)=>{"use strict";let o={systemEffectDialogClass:"pf-system-effect-dialog",systemEffectTableClass:"pf-system-effect-table"},n={systemEffectDialog:!1};e.fn.showSystemEffectInfoDialog=function(){let t=e("<div>",{class:"row"}),i=a.getSystemEffectData(),f=null,c=0;for(let[s,f]of Object.entries(i.wh)){c++;let i=e("<table>",{class:["compact","stripe","order-column","row-border",o.systemEffectTableClass].join(" ")}),d=e("<tbody>"),p=e("<thead>"),r=[],m=l.getEffectInfoForSystem(s,"name"),g=l.getEffectInfoForSystem(s,"class");for(let[t,s]of Object.entries(f)){let l="C"+t,o=a.getSecurityClassForSystem(l);"1"===t&&(r.push(e("<tr>")),r.push(e("<tr>")),p.append(r[0]),p.append(r[1]),r[0].append(e("<th>").html("&nbsp;&nbsp;"+m).prepend(e("<i>",{class:["fas","fa-square",g].join(" ")}))),r[1].append(e("<th>"))),r[0].append(e("<th>",{class:["text-right","col-xs-1",o].join(" ")}).text(l).attr("data-name",l)),r[1].append(e("<th>",{class:["text-right","txt-color","txt-color-grayLight"].join(" ")}).text(a.getSystemEffectMultiplierByAreaId(parseInt(t))+" x").attr("data-name",l));for(let[a,l]of Object.entries(s))a=parseInt(a),"1"===t&&(r.push(e("<tr>")),d.append(r[a+2]),r[a+2].append(e("<td>").text(l.effect))),r[a+2].append(e("<td>",{class:"text-right"}).text(l.value))}let h=e("<div>",{class:["col-md-6"].join(" ")}).append(e("<div>",{class:[a.config.dynamicAreaClass].join(" ")}).append(i.append(p).append(d)));t.append(h),c%2==0&&t.append(e("<div>",{class:["clearfix","visible-md","visible-lg"].join(" ")})),n.systemEffectDialog=t}let d=s.dialog({className:o.systemEffectDialogClass,title:"System effect information",message:n.systemEffectDialog,size:"large",show:!1});d.on("show.bs.modal",function(t){let a=e(),s=e(),l=()=>{a.removeClass("colHighlight"),s.removeClass("colHighlight")},n=e(this).find("table").DataTable({pageLength:-1,paging:!1,lengthChange:!1,ordering:!1,searching:!1,info:!1,columnDefs:[],data:null,initComplete:function(t,a){let s=this.api();s.tables().nodes().to$().on("mouseover","td",function(){let t=s.cell(this).index().column,a=s.column(t).header().dataset.name||"";if(a!==f&&(l(),f=a,a.length)){let t=e.fn.dataTable.tables({visible:!1,api:!0}).tables("."+o.systemEffectTableClass).columns([a+":name"]);t.header().flatten().to$().addClass("colHighlight"),t.nodes().flatten().to$().addClass("colHighlight")}}).on("mouseleave",function(){f=null,l()})}});a=n.columns().header().to$(),s=n.cells().nodes().to$()}),d.on("hide.bs.modal",function(t){e(this).find("table").DataTable().destroy(!0)}),d.modal("show")}});
//# sourceMappingURL=system_effects.js.map
