define(["jquery","app/init","app/util","bootbox"],(e,t,a,o)=>{"use strict";let n="pf-dialog-delete-account",i="SESSION.CAPTCHA.ACCOUNT.DELETE",l="pf-dialog-captcha-wrapper";e.fn.showDeleteAccountDialog=function(){requirejs(["text!templates/dialog/delete_account.html","mustache"],(r,s)=>{let c={deleteAccountId:n,userData:a.getCurrentUserData(),captchaImageWrapperId:l,formErrorContainerClass:a.config.formErrorContainerClass},d=s.render(r,c),u=o.dialog({title:"Delete account",message:d,show:!1,buttons:{close:{label:"cancel",className:"btn-default"},success:{label:'<i class="fas fa-user-times fa-fw"></i>&nbsp;delete account',className:"btn-danger",callback:function(){let o=e(this),n=o.find("form");if(n.validator("validate"),n.isValidForm()){let r=n.getFormValues();if(!e.isEmptyObject(r)){let s={formData:r};o.find(".modal-content").showLoadingAnimation(),e.ajax({type:"POST",url:t.path.deleteAccount,data:s,dataType:"json"}).done(function(t){o.find(".modal-content").hideLoadingAnimation(),void 0!==t.reroute?a.redirect(t.reroute):t.error&&t.error.length>0&&(n.showFormMessage(t.error),e("#"+l).showCaptchaImage(i,function(){n.find('[name="captcha"]').resetFormFields()}))}).fail(function(e,t,n){o.find(".modal-content").hideLoadingAnimation();let i=t+" "+n;a.showNotify({title:e.status+": deleteAccount",text:i,type:"error"})})}}return!1}}}});u.on("show.bs.modal",function(t){let a=e("#"+l);a.showCaptchaImage(i),a.find("i").on("click",function(){a.showCaptchaImage(i)})}),u.on("shown.bs.modal",function(t){e(this).initTooltips()}),u.modal("show")})}});
//# sourceMappingURL=delete_account.js.map
