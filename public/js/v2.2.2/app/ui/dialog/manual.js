define(["jquery","app/init","app/util","bootbox"],(e,a,t,l)=>{"use strict";let s="pf-dialog-navigation-list",o="pf-dialog-navigation-list-item",i="pf-manual-scrollspy";e.fn.showMapManual=function(){requirejs(["text!templates/dialog/map_manual.html","mustache"],(r,n)=>{let c={dialogNavigationClass:s,dialogNavLiClass:o,scrollspyId:i,pieChartClass:a.classes.pieChart.class,mapCounterClass:a.classes.pieChart.pieChartMapCounterClass,imgSrcBubble:`${t.imgRoot()}svg/bubble.svg`},u=n.render(r,c),m=l.dialog({title:"Manual",message:u,size:"large",buttons:{close:{label:"close",className:"btn-default"}},show:!1}),p=m[0],d=p.getElementsByClassName("pf-manual-scroll-break"),g=p.getElementsByClassName(o),b=p.querySelector(`#${i}`),f=p.querySelectorAll(`.${s} a`),h=b.querySelectorAll("a[data-target]"),C=[...f,...h];m.on("shown.bs.modal",a=>{let t=!1,l=()=>{if(!1===t){let e=b.mcs.top;for(let[a,t]of Object.entries(d)){if(t.offsetTop+e>0){g[a].classList.contains("active")||([...g].forEach(e=>{e.classList.remove("active"),e.getElementsByTagName("a")[0].blur()}),g[a].classList.add("active"));break}}}};e(b).mCustomScrollbar({axis:"y",theme:"light-3",scrollInertia:200,autoExpandScrollbar:!1,scrollButtons:{enable:!0,scrollAmount:30},advanced:{updateOnContentResize:!0},callbacks:{onInit:function(){let a=b.querySelector(`.${c.mapCounterClass}`);e(a).initMapUpdateCounter(),e(C).on("click",function(a){a.preventDefault(),t=!0,e(b).mCustomScrollbar("scrollTo",e(this).attr("data-target"));let s=this.closest(`.${o}`);l(),s&&([...g].forEach(e=>e.classList.remove("active")),this.parentNode.classList.add("active"))})},onScroll:function(){t=!1,l()},whileScrolling:l},mouseWheel:{enable:!0,scrollAmount:200,axis:"y",preventDefault:!0},scrollbarPosition:"outsite",autoDraggerLength:!0})}),m.on("hide.bs.modal",a=>{let t=a.target;e(C).off("click"),e(t.querySelector(`#${i}`)).mCustomScrollbar("destroy")}),m.modal("show")})}});
//# sourceMappingURL=manual.js.map
