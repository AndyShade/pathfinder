define(["jquery","app/init","app/util","bootbox"],(e,t,i,n)=>{"use strict";let a="pf-changelog-dialog",s="pf-dynamic-message-container",l="timeline",o=n=>{let a=n.find(".modal-content");a.showLoadingAnimation(),e.ajax({type:"POST",url:t.path.gitHubReleases,dataType:"json",context:{changelogDialog:n}}).done(function(e){let t=this.changelogDialog,i=e.version,n=e.releasesData;((e,t)=>{let i="error",n=t.current,a="Installed version check failed";t.dev?(i="info",n=t.current+" (dev)",a="This installation is ahead of current stable version <kbd>"+t.last+"</kbd>."):0===t.delta?(i="success",n=t.current,a="This installation is up2date."):(i="warning",n=t.current,a="This installation is "+t.delta+" version behind current stable <kbd>"+t.last+"</kbd>."),e.find("."+s).showMessage({dismissible:!1,type:i,title:n,text:a})})(t,i),requirejs(["text!templates/ui/timeline_element.html","mustache"],function(e,i){for(let a=0;a<n.length;a++){let s=n[a],o={isFirst:0===a,isOdd:a%2!=0,releaseDate:s.publishedAt.substr(0,10),releaseData:s},r=i.render(e,o);t.find("ul."+l).append(r)}t.find(".timeline > li").velocity("transition.expandIn",{stagger:300,duration:240,complete:function(){}})})}).fail(function(e,t,n){let a=t+" "+e.status+": "+n;i.showNotify({title:e.status+": login",text:a,type:"error"})}).always(function(){a.hideLoadingAnimation()})};e.fn.changelogsDialog=function(){let t=e("<div>").append(e("<div>",{class:s}),e("<ul>",{class:l})),i=n.dialog({className:a,title:"Changelog",size:"large",message:t});i.on("shown.bs.modal",function(e){o(i)})}});
//# sourceMappingURL=changelog.js.map
