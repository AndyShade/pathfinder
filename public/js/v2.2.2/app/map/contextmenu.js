define(["jquery","app/render"],(t,e)=>{"use strict";let n={contextMenuContainerId:"pf-contextmenu-container",mapContextMenuId:"pf-map-contextmenu",connectionContextMenuId:"pf-map-connection-contextmenu",endpointContextMenuId:"pf-map-endpoint-contextmenu",systemContextMenuId:"pf-map-system-contextmenu",contextMenuClass:"dropdown-menu",subMenuLeftClass:"dropdown-submenu-left",animationInType:"transition.flipXIn",animationInDuration:150,animationOutType:"transition.flipXOut",animationOutDuration:150},s=e=>{let s=t("."+n.contextMenuClass+'[role="menu"][style*="display: block"]');e&&(s=s.not(e)),s.velocity(n.animationOutType,{duration:n.animationOutDuration})},o=e=>{e.data.selectCallback&&e.data.selectCallback(t(e.currentTarget).attr("data-action"),e.data.original.context.component,e.data.original.event)};return{config:n,defaultMenuOptionConfig:()=>({id:"",selectCallback:null,hidden:[],active:[],disabled:[]}),renderMapContextMenu:()=>{let t={id:n.mapContextMenuId,items:[{icon:"fa-plus",action:"add_system",text:"add system"},{icon:"fa-object-ungroup",action:"select_all",text:"select all"},{icon:"fa-filter",action:"filter_scope",text:"filter scope",subitems:[{subIcon:"",subAction:"filter_wh",subText:"wormhole"},{subIcon:"",subAction:"filter_stargate",subText:"stargate"},{subIcon:"",subAction:"filter_jumpbridge",subText:"jumpbridge"},{subIcon:"",subAction:"filter_abyssal",subText:"abyssal"}]},{icon:"fa-sitemap",action:"map",text:"map",subitems:[{subIcon:"fa-edit",subAction:"map_edit",subText:"edit map"},{subIcon:"fa-street-view",subAction:"map_info",subText:"map info"}]},{divider:!0,action:"delete_systems"},{icon:"fa-trash",action:"delete_systems",text:"delete systems"}]};return e.render("modules/contextmenu",t)},renderConnectionContextMenu:()=>{let t={id:n.connectionContextMenuId,items:[{icon:"fa-hourglass-end",action:"wh_eol",text:"toggle EOL"},{icon:"fa-exclamation-triangle",action:"preserve_mass",text:"preserve mass"},{icon:"fa-reply fa-rotate-180",action:"change_status",text:"mass status",subitems:[{subIcon:"fa-circle",subIconClass:"txt-color txt-color-gray",subAction:"status_fresh",subText:"stage 1 (fresh)"},{subIcon:"fa-circle",subIconClass:"txt-color txt-color-orange",subAction:"status_reduced",subText:"stage 2 (reduced)"},{subIcon:"fa-circle",subIconClass:"txt-color txt-color-redDark",subAction:"status_critical",subText:"stage 3 (critical)"}]},{icon:"fa-reply fa-rotate-180",action:"wh_jump_mass_change",text:"ship size",subitems:[{subIcon:"fa-char",subChar:"S",subAction:"wh_jump_mass_s",subText:"smallest ships"},{subIcon:"fa-char",subChar:"M",subAction:"wh_jump_mass_m",subText:"medium ships"},{subIcon:"fa-char",subChar:"L",subAction:"wh_jump_mass_l",subText:"larger ships"},{subIcon:"fa-char",subChar:"XL",subAction:"wh_jump_mass_xl",subText:"capital ships"}]},{icon:"fa-crosshairs",action:"change_scope",text:"change scope",subitems:[{subIcon:"fa-minus-circle",subIconClass:"",subAction:"scope_wh",subText:"wormhole"},{subIcon:"fa-minus-circle",subIconClass:"txt-color txt-color-indigoDarkest",subAction:"scope_stargate",subText:"stargate"},{subIcon:"fa-minus-circle",subIconClass:"txt-color txt-color-tealLighter",subAction:"scope_jumpbridge",subText:"jumpbridge"}]},{divider:!0,action:"separator"},{icon:"fa-unlink",action:"delete_connection",text:"detach"}]};return e.render("modules/contextmenu",t)},renderEndpointContextMenu:()=>{let t={id:n.endpointContextMenuId,items:[{icon:"fa-globe",action:"bubble",text:"bubbled"}]};return e.render("modules/contextmenu",t)},renderSystemContextMenu:t=>{let s=[];for(let[e,n]of Object.entries(t))s.push({subIcon:"fa-tag",subIconClass:n.class,subAction:"change_status_"+e,subText:n.label});let o={id:n.systemContextMenuId,items:[{icon:"fa-plus",action:"add_system",text:"add system"},{icon:"fa-lock",action:"lock_system",text:"lock system"},{icon:"fa-volume-up",action:"set_rally",text:"set rally point"},{icon:"fa-tags",text:"set status",subitems:s},{icon:"fa-route",action:"find_route",text:"find route"},{icon:"fa-object-group",action:"select_connections",text:"select connections"},{icon:"fa-reply fa-rotate-180",text:"waypoints",subitems:[{subIcon:"fa-flag",subAction:"set_destination",subText:"set destination"},{subDivider:!0,action:""},{subIcon:"fa-step-backward",subAction:"add_first_waypoint",subText:"add new [start]"},{subIcon:"fa-step-forward",subAction:"add_last_waypoint",subText:"add new [end]"}]},{divider:!0,action:"delete_system"},{icon:"fa-trash",action:"delete_system",text:"delete system(s)"}]};return e.render("modules/contextmenu",o)},openMenu:(e,a,i)=>{let c=t("#"+e.id);s(c),c.off("click.contextMenuSelect","li"),c=((t,e,n,s)=>{t.find("li").removeClass("active").removeClass("disabled").show();for(let n of e)t.find('li[data-action="'+n+'"]').hide();for(let e of n)t.find('li[data-action="'+e+'"]').addClass("active");for(let e of s)t.find('li[data-action="'+e+'"]').addClass("disabled");return t})(c,e.hidden,e.active,e.disabled);let{left:u,openSubLeft:l}=((t,e)=>{let n=t.pageX,s=!1;return n+e>window.innerWidth&&e<n?(s=!0,n-=e):n+2*e>window.innerWidth&&2*e<n&&(s=!0),{left:n,openSubLeft:s}})(a,c.width()),{top:r}=((t,e)=>{let n=t.pageY;return n+e>window.innerHeight&&e<n&&(n-=e),{top:n}})(a,c.height());c.toggleClass(n.subMenuLeftClass,l).css({position:"absolute",left:u,top:r}).velocity(n.animationInType,{duration:n.animationInDuration,complete:function(){i={original:{event:a,context:i},selectCallback:e.selectCallback},t(this).one("click.contextMenuSelect","li",i,o)}})},closeMenus:s}});
//# sourceMappingURL=contextmenu.js.map
