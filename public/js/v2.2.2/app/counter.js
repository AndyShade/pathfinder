define(["jquery","app/util","app/lib/cron"],(t,s,e)=>{"use strict";let a={counterTaskAttr:"data-counter-task",counterStopClass:"stopCounter",counterDigitSmallClass:"pf-digit-counter-small",counterDigitLargeClass:"pf-digit-counter-large"},n=(t,e,n)=>{let i=s.getTimeDiffParts(e,new Date),r=i.days,l=i.hours,o=i.min,u=i.sec,c=[];"d"===n&&r>=1?c.push('<span class="'+a.counterDigitLargeClass+'">&gt;&nbsp;1d</span>'):((r>0||c.length>0)&&c.push('<span class="'+a.counterDigitLargeClass+'">'+r+"d</span>"),(l>0||c.length>0)&&c.push('<span class="'+a.counterDigitSmallClass+'">'+l+"h</span>"),(o>0||c.length>0)&&c.push('<span class="'+a.counterDigitSmallClass+'">'+o+"m</span>"),(u>=0||c.length>0)&&c.push('<span class="'+a.counterDigitSmallClass+'">'+u+"s</span>")),t.html(c.join(" "))},i=(s,n)=>{let i="["+a.counterTaskAttr+"]",r=s.filter(i);n&&(r=r.add(s.find(i))),r.each(function(){let s=t(this),n=s.attr(a.counterTaskAttr);e.delete(n)&&s.removeAttr(a.counterTaskAttr).removeClass(a.counterStopClass)})};return{config:a,updateDateDiff:n,initTimestampCounter:(t,r)=>{let l=parseInt(t.text());if(l>0){let o=t.attr("id")||s.getRandomString(),u=new Date(1e3*l);n(t,u,r),t.css({visibility:"initial"});let c=e.new(o,{precision:"seconds",interval:1,timeout:100});c.task=(()=>{t.hasClass(a.counterStopClass)?i(t):n(t,u,r)}),c.start(),t.attr(a.counterTaskAttr,o)}},initTableCounter:(t,s,i)=>{let r=t.api(),l=t.attr("id"),o=function(t,s,e,r){let l=this,o=l.node(),u=l.data();if(u&&Number.isInteger(u)&&!o.classList.contains(a.counterStopClass)){let t=new Date(1e3*u);n(l.nodes().to$(),t,i)}},u=e.new(l,{precision:"seconds",interval:1,timeout:100});u.task=(t=>{r.cells(null,s).every(o)}),u.start(),t.attr(a.counterTaskAttr,l)},destroyTimestampCounter:i}});
//# sourceMappingURL=counter.js.map
